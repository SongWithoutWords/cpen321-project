-- By default this file is used by `persistFileWith` in Model.hs (which is imported by Foundation.hs)
-- Syntax for this file here: https://github.com/yesodweb/persistent/blob/master/docs/Persistent-entity-syntax.md

User
    ident Text
    password Text Maybe
    UniqueUser ident
    deriving Typeable
Email
    email Text
    userId UserId Maybe
    verkey Text Maybe
    UniqueEmail email
-- Adding "json" causes ToJSON and FromJSON instances to be derived.
Comment json
    message Text
    userId UserId Maybe
    deriving Eq
    deriving Show


-- Not from template
-------------------

XUser
    email Text
    passwordHash Text
    salt Text
    data (Either (Key Doctor) (Key Patient))
    UserEmail email

Doctor json
    firstName Text
    lastName Text
    deriving Eq
    deriving Show

Patient json
    firstName Text
    lastName Text
    dateOfBirth Day Maybe
    deriving Eq
    deriving Show

-- Request by a patient for a doctor
DoctorPatientRequest json
    doctor DoctorId
    patient PatientId
    UniqueRequest patient doctor
    deriving Eq
    deriving Show

-- Relation between a patient and a doctor
DoctorPatientRelation json
    doctor DoctorId
    patient PatientId
    UniqueRelation patient doctor
    deriving Eq
    deriving Show

Prescription
    medication Text
    dosageUnit
    amount

